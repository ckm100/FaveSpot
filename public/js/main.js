var overlay=$(".overlay"),loginDialog=$(".login-dialog"),SignupDialog=$(".signup-dialog");$(document).on("click",".going-btn",function(){var r,e=$(this);"false"===$(".isAuth").val()?($(".overlay").show(),$(".loader").hide(),$(".warning-message").html("Please log in or sign up to enable you choose the place you are going"),$(".close-btn").show(),$(".warning-container").show()):($(".overlay").show(),$(".loader").show(),$(".warning-message").css("color","gray"),$(".warning-message").html("Please wait, sending request..."),$(".close-btn").hide(),$(".warning-container").show(),r=""!==$(".search-field").val()?{userId:$(e.prevAll()[6]).attr("data-userId"),barId:$(e.prevAll()[6]).val(),location:$(".search-field").val().toLowerCase()}:{userId:$(e.prevAll()[6]).attr("data-userId"),barId:$(e.prevAll()[6]).val(),location:document.title.toLowerCase()},$.ajax({method:"GET",url:"/going",data:r,success:function(r){e.prop("disabled",!0),e.next().prop("disabled",!1),$(e.prevAll()[4]).html(r.going+" going"),$(".loader").hide(),$(".warning-message").css("color","green"),$(".warning-message").html("Request Sent!"),$(".close-btn").show()},error:function(r){$(".loader").hide(),$(".warning-message").css("color","red"),$(".warning-message").html("Error sending request, please try again"),$(".close-btn").show()}}))}),$(document).on("click",".not-going-btn",function(){var r,e=$(this);$(".overlay").show(),$(".loader").show(),$(".warning-message").css("color","gray"),$(".warning-message").html("Please wait, canceling request..."),$(".close-btn").hide(),$(".warning-container").show(),r=""!==$(".search-field").val()?{userId:$(e.prevAll()[7]).attr("data-userId"),barId:$(e.prevAll()[7]).val(),location:$(".search-field").val().toLowerCase()}:{userId:$(e.prevAll()[7]).attr("data-userId"),barId:$(e.prevAll()[7]).val(),location:document.title.toLowerCase()},$.ajax({method:"GET",url:"/notgoing",data:r,success:function(r){e.prop("disabled",!0),e.prev().prop("disabled",!1),$(e.prevAll()[5]).html(r.going+" going"),$(".loader").hide(),$(".warning-message").css("color","green"),$(".warning-message").html("Request Cancel!"),$(".close-btn").show()},error:function(r){$(".loader").hide(),$(".warning-message").css("color","red"),$(".warning-message").html("Error canceling request, please try again"),$(".close-btn").show()}})}),$(".search-icon").click(function(){""!==$(".search-field").val()&&(document.title=$(".search-field").val(),$(".overlay").show(),$(".search-loader").show(),$.ajax({method:"POST",url:"/location",data:{location:$(".search-field").val().toLowerCase()},success:function(r){"UNAVAILABLE_FOR_LOCATION"===r.id?($(".search-loader").hide(),$(".loader").hide(),$(".warning-message").css("color","gray"),$(".warning-message").html("Sorry there is no records of bars at the location you entered"),$(".close-btn").show(),$(".warning-container").show()):($(".bars").html(r),$(".overlay").hide(),$(".search-loader").hide())},error:function(r){$(".search-loader").hide(),$(".loader").hide(),$(".warning-message").css("color","gray"),$(".warning-message").html("Sorry something went wrong please try again"),$(".close-btn").show(),$(".warning-container").show()}}))}),$(".no-account-btn").click(function(){loginDialog.slideUp(),SignupDialog.slideDown()}),$(".have-account-btn").click(function(){loginDialog.slideDown(),SignupDialog.slideUp()}),$("#sign-in").click(function(){overlay.show(),loginDialog.slideDown()}),$("#sign-up").click(function(){overlay.show(),SignupDialog.slideDown()}),$(".sign-up-btn").click(function(){overlay.show(),SignupDialog.slideDown()}),$(".search-field").keydown(function(r){13===r.keyCode&&""!==$(".search-field").val()&&(document.title=$(".search-field").val(),$(".overlay").show(),$(".search-loader").show(),$.ajax({method:"POST",url:"/location",data:{location:$(".search-field").val().toLowerCase()},success:function(r){"UNAVAILABLE_FOR_LOCATION"===r.id?($(".search-loader").hide(),$(".loader").hide(),$(".warning-message").css("color","gray"),$(".warning-message").html("Sorry there is no records of bars at the location you entered"),$(".close-btn").show(),$(".warning-container").show()):($(".bars").html(r),$(".overlay").hide(),$(".search-loader").hide())},error:function(r){$(".search-loader").hide(),$(".loader").hide(),$(".warning-message").css("color","gray"),$(".warning-message").html("Sorry something went wrong please try again"),$(".close-btn").show(),$(".warning-container").show()}}))}),$(".close-icon").click(function(){loginDialog.is(":visible")?(overlay.hide(),$(".login-email-password-error, .login-email-error, .login-password-error,.email-invalid-error,.password-invalid-error,.general-error").hide(),loginDialog.slideUp()):SignupDialog.is(":visible")&&(overlay.hide(),$(".login-firstname-email-password-error, .login-firstname-error,.login-email-error,.login-password-error,.email-exist-error,.general-error").hide(),SignupDialog.slideUp())}),$(".login-btn").click(function(r){var e,o=$("#login-email").val(),i=$("#login-pword").val();""===o&&""===i?($(".login-email-password-error").show(),$(".login-email-error, .login-password-error").hide()):""===o?($(".login-email-error").show(),$(".login-email-password-error, .login-password-error").hide()):""===i?($(".login-password-error").show(),$(".login-email-password-error, .login-email-error").hide()):""!==o&&""!==i&&($(".login-email-password-error, .login-email-error, .login-password-error,.email-invalid-error,.password-invalid-error,.general-error").hide(),$(".login-btn").html("Logging In..."),$(".login-btn").prop("disabled",!0),e=""===$(".search-field").val()?{email:o,password:i}:{email:o,password:i,lastSearch:$(".search-field").val()},$.ajax({method:"POST",url:"/login",data:e,success:function(r){0===parseInt(r.error)?($(".login-btn").html("Log In"),$(".login-btn").prop("disabled",!1),$(".email-invalid-error").show(),$(".password-invalid-error").hide()):1===parseInt(r.error)?($(".login-btn").html("Log In"),$(".login-btn").prop("disabled",!1),$(".password-invalid-error").show(),$(".email-invalid-error").hide()):($(".password-invalid-error").hide(),$(".email-invalid-error").hide(),window.location.reload())},error:function(r){r&&($(".login-btn").html("Log In"),$(".login-btn").prop("disabled",!1),$(".password-invalid-error").hide(),$(".email-invalid-error").hide(),$(".general-error").show())}}))}),$(".signup-btn").click(function(){var r,e=$("#signup-fname").val(),o=$("#signup-email").val(),i=$("#signup-pword").val();""===e&&""===i&&""===o?($(".login-firstname-email-password-error").show(),$(".login-firstname-error, .login-email-error,.login-password-error").hide()):""===e?($(".login-firstname-error").show(),$(".login-firstname-email-password-error, .login-email-error,.login-password-error").hide()):""===o?($(".login-email-error").show(),$(".login-firstname-email-password-error, .login-firstname-error,.login-password-error").hide()):""===i?($(".login-password-error").show(),$(".login-firstname-email-password-error, .login-firstname-error,.login-email-error").hide()):""!==e&&""!==i&&""!==o&&($(".login-firstname-email-password-error, .login-firstname-error,.login-email-error,.login-password-error,.email-exist-error,.general-error").hide(),$(".signup-btn").html("Signing Up..."),$(".signup-btn").prop("disabled",!0),r=""===$(".search-field").val()?{uname:e[0].toUpperCase()+e.substring(1,e.length),email:o,password:i,lastSearch:""}:{uname:e[0].toUpperCase()+e.substring(1,e.length),email:o,password:i,lastSearch:$(".search-field").val()},$.ajax({method:"POST",url:"/signup",data:r,success:function(r){0===parseInt(r.error)?($(".signup-btn").html("Sign Up"),$(".signup-btn").prop("disabled",!1),$(".email-exist-error").show()):($(".email-exist-error").hide(),window.location.reload())},error:function(r){r&&($(".signup-btn").html("Sign Up"),$(".signup-btn").prop("disabled",!1),$(".email-exist-error").hide(),$(".general-error").show())}}))}),$(".close-btn").click(function(){$(".warning-container").hide(),$(".overlay").hide()}),$(".top").click(function(){$("html,body").animate({scrollTop:$(".search-container").offset().top},1e3)}),$(document).scroll(function(){$(document).scrollTop()>=1530?$(".top").show():$(".top").hide()}),$(".logout").click(function(r){$.ajax({method:"GET",url:"/logout",success:function(){window.location.href="/"}})});